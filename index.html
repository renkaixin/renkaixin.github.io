<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Easy &amp; Breezy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Easy & Breezy">
<meta property="og:url" content="http://renhao.me/index.html">
<meta property="og:site_name" content="Easy & Breezy">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Easy & Breezy">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="Easy &amp; Breezy" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

  <link href="/prettify/prettify.css" rel="stylesheet" type="text/css">

  <script type="text/javascript" src="/prettify/prettify.js"></script>


</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Easy &amp; Breezy</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://renhao.me"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-农业革命的受害者们" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/20/农业革命的受害者们/" class="article-date">
  <time datetime="2016-10-19T16:25:13.000Z" itemprop="datePublished">2016-10-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/20/农业革命的受害者们/">农业革命的受害者们</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>浮士德跟魔鬼交易，而人类则跟谷物交易。</p>
</blockquote>
<h3 id="物种演化成功的标准">物种演化成功的标准</h3><p>物种演化成功的标准，看的就是这个物种DNA拷贝数在世界上的多寡。如果世界上不再有某个物种的DNA拷贝，就代表这个物种已经灭绝。相反如果有很多个体携带这个物种的DNA拷贝，则代表这个物种演化的成功。<br>人类经过不断地迁徙和进行农业社会革命，让这个星球上大多数的原始生物都很快绝迹。现存生物个体中，已经找不到长毛象，象鸟，地懒等动物的DNA拷贝了，他们已经灭绝了。智人崛起后，迅速结束了它们长达百万年的演化。然而有些物种却演化得非常成功，门丁兴旺，枝繁叶茂。</p>
<h3 id="人类的好朋友们">人类的好朋友们</h3><p>这个星球上有10亿只牛，10亿只羊，250亿只鸡，他们看起来都像是人类的好朋友。儿童绘本里面有和谐的小羊和小牛在草地上吃草，并且鼓励孩子们要爱护动物。而人类经过长期努力才驯化出这些动物，背后真正的动机是因为人类缺少动物界的朋友么？</p>
<h3 id="可怜的牛宝宝">可怜的牛宝宝</h3><p>奶牛也只有在生宝宝后才会产奶。当它刚刚当上牛妈妈的时候，人类就要剥夺它的宝宝的吃奶权利。早期的人类会直接将牛宝宝杀死，但后来发现依然需要牛宝宝来刺激母牛产奶，就会在牛宝宝的嘴上绑上一圈刺，小牛想吃奶就会刺伤牛妈妈，让牛妈妈排斥给小牛吃奶。而在现代畜牧业中，一头小牛宝宝可能从出生就进入笼子里度过它短暂而可怜的一生。</p>
<blockquote>
<p>牛宝宝出生后立即与妈妈分开，关在一个不比自己身体大多少的笼子里，牛宝宝要在这里度过一辈子，但它的一辈子平均也就只有大约四个月。它一辈子再也不会离开笼子，也不可能和其他小牛玩，甚至连走路的机会也被剥夺。这一切都是为了避免它的肌肉变得僵硬，肌肉越柔软，牛排就越鲜嫩多汁。于是，这只小牛第一次有机会走路、伸展筋骨、遇见其他小牛的时候，就是通往屠宰场的路上。就演化而言，牛可能是有史以来最成功的动物，但同时，它们也是地球上生活最悲惨的动物。</p>
</blockquote>
<h3 id="受害者">受害者</h3><p>农业革命的受害者是这些被驯化的动物们，它们在人类的帮助下，演化得很成功，但是并不幸福。人类对于动物的驯化是建立在野蛮的作为上，并且随着时间的推移，残忍程度有增无减。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://renhao.me/2016/10/20/农业革命的受害者们/" data-id="ciuh4rsys00065vcrhuz0wtf2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/人类简史/">人类简史</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-semver" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/23/semver/" class="article-date">
  <time datetime="2016-09-23T12:23:37.000Z" itemprop="datePublished">2016-09-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/23/semver/">Semantic Versioning</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="问题">问题</h3><p>开发过程必然会引用第三方的框架、标准、工具，从而形成了依赖。但第三方的框架、标准、<br>工具本身也会迭代和发展，当它们发布新版本的时候，如何决定是否更新依赖？</p>
<h3 id="解决方案">解决方案</h3><p>语义化版本的核心观点是必须对版本号分区：Major.Minor.Patch</p>
<ul>
<li>Major 包含了不可向下兼容的API更改</li>
<li>Minor 包含了可以向下兼容的Feature</li>
<li>Patch 包含了可以向下兼容的Bugfix</li>
</ul>
<p>其余包括预览版或build信息都可以扩展到这三个区之后。</p>
<h3 id="原则">原则</h3><ol>
<li>软件必须包含公共的API，它们应该清晰地存在于代码或文档中。</li>
<li>软件的版本号必须遵循X.Y.Z这个范式。X, Y, Z只能是不包含前导0的正整数。每一项都应该按自然数顺序向上递增。</li>
<li>一旦一个版本形成，它的代码将必须不能被修改。任何对代码的修改都必须被当作一个新版本。</li>
<li>Major版本号为0的时候，代表软件的状态是最初始的开发状态，任何变更都可能发生，此时的公共API是不稳定的。</li>
<li>当1.0.0版本正式发布的时候，这个软件第一次拥有了稳定的公共API。后续版本的增长，都将依据这些公共API。</li>
<li>当修改若干向下兼容的bug时候，Patch版本号可以向前前进1步。</li>
<li>当公共API引入了新的，向下兼容的功能时，必须前进1步Minor版本号；<br>当某个公共API被标记为deprecated时候，必须前进1步Minor版本号；<br>当内部代码进行了许多的新功能和改进时候，或许可以前进1步Minor版本号；<br>当Patch打的足够多的时候，或许可以前进1步Minor版本号；<br>当Minor版本号前进时候，Patch版本号必须清零。</li>
<li>当修改了某个公共API并且不向下兼容时，必须前进1步Major版本号;<br>当Minor足够多的时候，或许可以前进1步Minor版本号；<br>当Major版本号前进时候，Minor和Patch版本号必须清零。</li>
<li>一个Pre-release软件的版本号可能包含了由连字符-链接的一组由.分割的ID，这组ID必须满足[0-9A-Za-z-]，<br>这组ID必须不能为空，如果是数字不能有前导0，Pre-release版本意味着这个软件并非稳定而且可能无法达到兼容的需求.<br>范例：1.0.0-alpha、1.0.0-alpha.1、1.0.0-0.3.7、1.0.0-x.7.z.92。</li>
<li>版本编译信息可以被标注在修订版或先行版本号之后，先加上一个加号再加上一连串以句点分隔的标识符号来修饰。<br>标识符号必须由ASCII的英数字和连接号[0-9A-Za-z-]组成，且禁止留白。当判断版本的优先层级时，版本编译信息可被忽略。<br>因此当两个版本只有在版本编译信息有差别时，属于相同的优先层级。范例：1.0.0-alpha+001、1.0.0+20130313144700、1.0.0-beta+exp.sha.5114f85。</li>
<li>必须要将版本号区分为Major.Minor.Patch, 版本号必须从前向后比较， 1.0.0 &lt; 2.0.0 &lt; 2.1.0 &lt; 2.1.1<br>当Major.Minor.Patch完全相同时，Pre-release版本是低于对应的正式版本的，即: 1.0.0-alpha &lt; 1.0.0;<br>当两个同是Pre-release的版本比较时候，如果同是数字，则比较大小，如果同是字母，则逐位比较ASCII编码顺序。<br>数字的排序低于字母，如果之前的所有版本号都相同，那么长的版本号优先级高于短的。<br>例子：1.0.0-alpha &lt; 1.0.0-alpha.1 &lt; 1.0.0-alpha.beta &lt; 1.0.0-beta &lt; 1.0.0-beta.2 &lt; 1.0.0-beta.11 &lt; 1.0.0-rc.1 &lt; 1.0.0.</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://renhao.me/2016/09/23/semver/" data-id="ciuh4rsyv00095vcrnul2gcmh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Git提交自动部署" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/03/Git提交自动部署/" class="article-date">
  <time datetime="2016-09-03T09:59:24.000Z" itemprop="datePublished">2016-09-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/03/Git提交自动部署/">Git提交自动部署</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="问题：">问题：</h3><p>通常情况Git都被用作版本控制, 但何不考虑当Git Push到远端Repo后自动发布到线上环境?</p>
<h3 id="方案:">方案:</h3><p>Git hooks是一种简单的解决方案, 配置相应的命令到对应的钩子上,可以实现自动发布。<br>当远端Repo完整接收到Push后,会触发post-receive事件,调用对应的钩子文件,那我们接下来创建这个钩子。</p>
<pre><code class="bash">cd repo/foo.git
cd hooks/
touch post-receive
</code></pre>
<p>当在某一Git目录下执行命令时候, Git默认work-tree和git-dir都是当前目录。<br>此时我们需要在钩子命令中显示定义线上服务的根目录和Git仓库的目录</p>
<pre><code class="bash">git --work-tree=/var/www/site --git-dir=/repo/foo.git checkout -f
</code></pre>
<p>此处执行<code>checkout</code>命令, 强制用<code>git-dir</code>的文件覆盖<code>work-tree</code>的文件</p>
<p>客户端执行:</p>
<pre><code class="bash">git push origin
</code></pre>
<p>文件会自动发布到<code>/var/www/site</code>目录</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://renhao.me/2016/09/03/Git提交自动部署/" data-id="ciuh4rsyw000a5vcr0bo4fyma" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/">Git</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-SoftDelete与UniqueIndex的冲突" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/10/SoftDelete与UniqueIndex的冲突/" class="article-date">
  <time datetime="2016-08-10T09:43:31.000Z" itemprop="datePublished">2016-08-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/10/SoftDelete与UniqueIndex的冲突/">SoftDelete与UniqueIndex的冲突</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="问题：">问题：</h2><p>用数据表A的列del标记单条记录是否删除(通常1是删除)，是业务处理中的常用手段，简称Soft Delete。<br>但如果数据表中对某些字段有唯一键约束，就会产生头疼的问题。</p>
<h4 id="考虑如下的表">考虑如下的表</h4><table>
<thead>
<tr>
<th style="text-align:center">phone</th>
<th style="text-align:center">version</th>
<th style="text-align:center">price</th>
<th style="text-align:center">del</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">iPhone</td>
<td style="text-align:center">4S</td>
<td style="text-align:center">2000</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">iPhone</td>
<td style="text-align:center">4S</td>
<td style="text-align:center">3000</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">Galaxy</td>
<td style="text-align:center">S4</td>
<td style="text-align:center">4000</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
<p>这张表如果建立了phone version的唯一键，就代表了iPhone 4S仅能拥有一种价格。<br>如果希望运用SoftDelete将被删除的数据保存下来，将会被唯一约束从而无法保存。<br>如果同时建立了phone version del的唯一键，将不能同时有2条删除的记录。</p>
<h2 id="解决方案">解决方案</h2><h4 id="1-_(在Mysql环境中)_不设置del而是设置activate">1. (在Mysql环境中) 不设置del而是设置activate</h4><p>mysql对待null值用比较奇怪的模式，认为每个null是唯一的，查询子句中如果出现<code>where a = null</code>是无法查询预期结果的(必须使用<code>a IS NULL</code>)<br>活跃记录的activate设为1，删除记录activate设为null。</p>
<h4 id="2-_(非Mysql环境)_建立有条件的唯一约束">2. (非Mysql环境) 建立有条件的唯一约束</h4><p><code>ADD CONSTRAINT .... WHERE deleted != 1</code> 仅将唯一键约束建立在活跃的记录上</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://renhao.me/2016/08/10/SoftDelete与UniqueIndex的冲突/" data-id="ciuh4rsz0000e5vcr8v126eez" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Database/">Database</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-回滚git的提交和push" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/10/回滚git的提交和push/" class="article-date">
  <time datetime="2016-08-10T02:43:00.000Z" itemprop="datePublished">2016-08-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/10/回滚git的提交和push/">回滚git的提交和push</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="问题：">问题：</h3><p>开发中提交了错误的代码，并且将这个commit push到远端Git Repo中。</p>
<h3 id="解决方案">解决方案</h3><p>假设错误的提交版本号是ba65c34, 其parent是c4375469</p>
<p>方案1：</p>
<pre><code class="bash">git revert ba65c34
git push origin
</code></pre>
<p>方案2</p>
<pre><code class="bash">git reset c4375469
git push origin -f
</code></pre>
<p>方案2优点：分支上有更干净的历史（不会呈现错误的commit和revert commit）<br>方案2缺点：<br>1.强制push的瞬间如果有组员提交了代码到同一分支，会被冲掉<br>2.如果组员pull了错误的代码，他将不知道里面有问题且已经修复，如果用方案1他可以在remote的分支历史上看到</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://renhao.me/2016/08/10/回滚git的提交和push/" data-id="ciuh4rsyy000c5vcrxjd3ubit" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/">Git</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-用Git迁移不同分支的Commit" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/02/用Git迁移不同分支的Commit/" class="article-date">
  <time datetime="2016-08-02T10:46:06.000Z" itemprop="datePublished">2016-08-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/02/用Git迁移不同分支的Commit/">用Git迁移不同分支的Commit</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="问题：">问题：</h3><p>在某一新特性feature/A中开发，此时线上有bug需要紧急修复，慌忙中未切换到master分支，而是修改后提交到了feature/A，此时需要将这个commit挪到master中然后提交并push</p>
<h3 id="解决方案">解决方案</h3><ol>
<li>git-log 查找需要迁移的commit<pre><code class="bash">git checkout feature/A
git log --graph --decorate --pretty=oneline --abbrev-commit
</code></pre>
</li>
<li>git cherry-pick 应用迁移出的commit<pre><code class="bash">// 选中需要迁移的commit号 3f90fe7
git checkout master
git cherry-pick 3f90fe7
git push origin
// 修复完毕
</code></pre>
</li>
<li>(可选) reset误提交的commit<pre><code class="bash">//如果需要去 feature/A中撤销这次提交
git checkout feature/A
// 4da72e5 是被cherry-pick走的上一个版本号
git reset --hard 4da72e5
</code></pre>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://renhao.me/2016/08/02/用Git迁移不同分支的Commit/" data-id="ciuh4rsz1000h5vcrv4syl0jv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/">Git</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-用Git-Stash-临时储藏手头的变更" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/24/用Git-Stash-临时储藏手头的变更/" class="article-date">
  <time datetime="2016-07-24T09:26:29.000Z" itemprop="datePublished">2016-07-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/24/用Git-Stash-临时储藏手头的变更/">用Git Stash 临时储藏手头的变更</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>当修改当前分支时候，需要切换到其他分支的时候。可以使用 git stash 命令储藏当前分支的变更。</p>
<h3 id="使用情景：">使用情景：</h3><p>正处于一个分支的开发中，得知此分支有最近提交，用git pull获取最新提交的时候可能有冲突，此时可以用</p>
<pre><code class="git">git stash
git pull
git stash pop 获取
</code></pre>
<p>正处于一个分支的开发中，需要紧急修复当前分支上的bug，可以</p>
<pre><code class="git">git stash
fix some bugs…
git commit -m fix bug
git stash pop
</code></pre>
<h3 id="命令：">命令：</h3><pre><code class="git">git stash 储藏当前分支
git stash save -m messages… 附带message信息标记当前的储藏
git stash list 查看储藏列表
git stash pop 应用最近的储藏，并在储藏队列中删除他
git stash apply [&lt;stash&gt;] 应用某一个储藏，并不删除他
git stash show [&lt;stash&gt;] 查看stash的详情，其中变更的文件详情
git stash clear 清除stash堆栈，不可逆操作
git stash drop [&lt;stash&gt;] 删除某一stash
(不解) git branch &lt;branch_name&gt; [&lt;stash&gt;] 用当前的stash创建一个新分支并切换到这个分支上面
</code></pre>
<h4 id="git_branch_还不知道如何使用,_文档原文如下:">git branch 还不知道如何使用, 文档原文如下:</h4><p>Creates and checks out a new branch named <branchname> starting from the commit at which the <stash> was originally created, applies the changes recorded in <stash> to the new working tree and index. If that succeeds, and <stash> is a reference of the form stash@{<revision>}, it then drops the <stash>. When no <stash> is given, applies the latest one.<br>This is useful if the branch on which you ran git stash save has changed enough that git stash apply fails due to conflicts. Since the stash is applied on top of the commit that was HEAD at the time git stash was run, it restores the originally stashed state with no conflicts.</stash></stash></revision></stash></stash></stash></branchname></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://renhao.me/2016/07/24/用Git-Stash-临时储藏手头的变更/" data-id="ciuh4rsz4000j5vcrk0z0ezim" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/">Git</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ngChecked-Directive" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/19/ngChecked-Directive/" class="article-date">
  <time datetime="2016-07-18T16:44:05.000Z" itemprop="datePublished">2016-07-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/19/ngChecked-Directive/">ngChecked Directive</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="问题">问题</h3><pre><code class="html">&lt;input type=“checkbox” ng-model=“one.is_checked” ng-checked=“one.is_checked&quot;&gt;
</code></pre>
<pre><code class="Javascript">one.is_checked = 1;
</code></pre>
<p>期望checkbox选中，但结果是checkbox没有选中。</p>
<h3 id="解决方案">解决方案</h3><pre><code class="html">&lt;input type=“checkbox” ng-model=“one.is_checked” ng-checked=“one.is_checked&quot;&gt;
</code></pre>
<pre><code class="Javascript">one.is_checked = true;
</code></pre>
<p>或</p>
<pre><code class="html">&lt;input type=“checkbox” ng-model=“one.is_checked” ng-true-value=“1&quot;&gt;
</code></pre>
<pre><code class="Javascript">one.is_checked = 1;
</code></pre>
<p>或</p>
<pre><code class="html">&lt;input type=“checkbox” ng-checked=“one.is_checked”&gt;
</code></pre>
<pre><code class="Javascript">one.is_checked = 1;
</code></pre>
<h3 id="原理">原理</h3><p>Angular官方建议ng-model与ng-checked不可同时使用，否则会出现不可预估的结果。<br>ngChecked是为解决记录checkbox的checked属性而设计，表达式求值可以决定当前状态是否选中。而ngModel仅在接到布尔值时候才控制checkbox的选中状态，否则需要指定真假值的具体形式</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://renhao.me/2016/07/19/ngChecked-Directive/" data-id="ciuh4rsza000l5vcrgbb8skis" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular/">Angular</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Javascript/">Javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-talk-about-life" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/11/talk-about-life/" class="article-date">
  <time datetime="2016-01-11T05:21:17.000Z" itemprop="datePublished">2016-01-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/11/talk-about-life/">小谈生活</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>午休时候陷入了冥想，不知是不是冥想，还是仅仅想了很多。<br>很忙，忙于应付很多突来的事情，待办清单里面的事，来了去，去了来，像极了茶馆小二的迎来送往。<br>可是生命不可重复，时间一直流逝，忙是什么？忙的是什么？为什么要忙？要忙什么？</p>
<p>生命的终点没有奖杯，没有盛大的颁奖仪式，即便有，奖品也不是寿命的延长。</p>
<p>或许一直想得到的，应该是一种确定的感觉，是一种自己明白自己在做什么的安心，是每一次对困惑解开后的恍然大悟，是每一次性能提升后的心满意足，是每一次交付后看到别人很开心后的自己的开心。</p>
<p>去掉那些不安，去掉那些困惑，去掉那些不满，去掉那些不开心，这，就是每天的奖杯吧。</p>
<p>也是生命的意义？</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://renhao.me/2016/01/11/talk-about-life/" data-id="ciuh4rsze000p5vcr8eoerrsh" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Life/">Life</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-bootstrap-modal-angular-directeves" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/01/bootstrap-modal-angular-directeves/" class="article-date">
  <time datetime="2016-01-01T13:36:25.000Z" itemprop="datePublished">2016-01-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/01/bootstrap-modal-angular-directeves/">把Bootstrap的Modal组件封装成Angular的Directive</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>我在目前的angular项目中使用bootstrap组件情况比较多，尤其喜欢的情景是：Panel负责列表展示，Modal负责详细数据修改。<br>但目前的痛苦之处是：在HTML结构上，凡是用到了Modal的地方，都要完整写一遍Modal的HTML，并且要定义Modal的ID，业务中如果需要展示隐藏这个Modal,还需要在Controller中调用Bootstrap/Modal的API完成。重复代码很多，而且容易出错。<br>这次优化，我将Modal组件封装成了一个指令，它的头/身/尾分别对应3个简单的子指令，又封装了两个元素指令，用来控制Modal的显示和隐藏(任何具有这些元素的DOM，都具备显示或隐藏某一modal的功能)</p>
<h4 id="directives-js">directives.js</h4><pre><code class="Javascript">angular.module(&#39;app&#39;, []).directive(
  &#39;momentModal&#39;, function() {
    return {
        restrict: &#39;E&#39;,
        transclude: true,
        replace: true,
        scope: {
            show : &#39;=&#39;,
            close : &#39;=&#39;
        },
        template:
            &#39;&lt;div class=&quot;modal&quot; style=&quot;display: none;&quot;&gt;\
                &lt;div class=&quot;modal-dialog&quot;&gt;\
                    &lt;div class=&quot;modal-content&quot; ng-transclude&gt;\
                    &lt;/div&gt;\
                &lt;/div&gt;\
            &lt;/div&gt;&#39;,
        link: function (scope, ele, attrs) {

            var title = attrs.title || &#39;&#39;, header;

            if(&#39;size&#39; in attrs &amp;&amp; ~[&#39;lg&#39;, &#39;sm&#39;].indexOf(attrs.size)) {
                ele.find(&#39;.modal-dialog&#39;).addClass(&#39;modal-&#39; + attrs.size);
            }
            if(!ele.find(&#39;.modal-header&#39;).length) {
                header = $compile(&#39;&lt;div class=&quot;modal-header&quot;&gt;\
                            &lt;a href=&quot;javascript:void(0);&quot; moment-modal-close class=&quot;pull-right&quot;&gt;&lt;i class=&quot;fa fa-times&quot;&gt;&lt;/i&gt;&lt;/a&gt;\
                            &lt;h4 class=&quot;modal-title&quot;&gt;&#39; + title + &#39;&lt;/h4&gt;\
                    &lt;/div&gt;&#39;)(scope);
                ele.find(&#39;.modal-content&#39;).prepend(header);
            }

            _.isFunction(scope.show) &amp;&amp; ele.on(&#39;show.bs.modal&#39;, function () {
                scope.show();
            });

            _.isFunction(scope.hide) &amp;&amp; ele.on(&#39;hide.bs.modal&#39;, function () {
                scope.hide();
            });
        }
      };
  }).directive(&#39;momentModalHeader&#39;, function() {
      return {
            restrict: &#39;E&#39;,
            transclude: true,
            replace: true,
            template: &#39;&lt;div class=&quot;modal-header&quot; ng-transclude&gt;&lt;/div&gt;&#39;
      }
  })directive(&#39;momentModalBody&#39;, function() {
      return {
            restrict: &#39;E&#39;,
            transclude: true,
            replace: true,
            template: &#39;&lt;div class=&quot;modal-body&quot; ng-transclude&gt;&lt;/div&gt;&#39;
      }
  })directive(&#39;momentModalFooter&#39;, function() {
      return {
            restrict: &#39;E&#39;,
            transclude: true,
            replace: true,
            template: &#39;&lt;div class=&quot;modal-footer&quot; ng-transclude&gt;&lt;/div&gt;&#39;
      }
  })
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://renhao.me/2016/01/01/bootstrap-modal-angular-directeves/" data-id="ciuh4rszh000s5vcryc16pmvo" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular/">Angular</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Javascript/">Javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular/">Angular</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Database/">Database</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/">HTML</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Javascript/">Javascript</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Life/">Life</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/人类简史/">人类简史</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Angular/" style="font-size: 13.33px;">Angular</a> <a href="/tags/Database/" style="font-size: 10px;">Database</a> <a href="/tags/Git/" style="font-size: 20px;">Git</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/Javascript/" style="font-size: 16.67px;">Javascript</a> <a href="/tags/Life/" style="font-size: 10px;">Life</a> <a href="/tags/人类简史/" style="font-size: 10px;">人类简史</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/10/20/农业革命的受害者们/">农业革命的受害者们</a>
          </li>
        
          <li>
            <a href="/2016/09/23/semver/">Semantic Versioning</a>
          </li>
        
          <li>
            <a href="/2016/09/03/Git提交自动部署/">Git提交自动部署</a>
          </li>
        
          <li>
            <a href="/2016/08/10/SoftDelete与UniqueIndex的冲突/">SoftDelete与UniqueIndex的冲突</a>
          </li>
        
          <li>
            <a href="/2016/08/10/回滚git的提交和push/">回滚git的提交和push</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 任浩<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>